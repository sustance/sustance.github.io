
<p></p>





<?php 
// Fetch and decode the JSON data
$json_url = 'https://thunix.net/~id/status_server_master.json';
$json_data = file_get_contents($json_url);
$data = json_decode($json_data, true);

// Extract unique values for menu
$countries = [];
$software_keys = [];

if (isset($data['servers'])) {
    foreach ($data['servers'] as $server_id => $server_info) {
        // Get country
        if (isset($server_info['country'])) {
            $countries[$server_info['country']] = true;
        }
        
        // Get software keys (from data->software)
        if (isset($server_info['data']['software'])) {
            foreach ($server_info['data']['software'] as $key => $value) {
                $software_keys[$key] = true;
            }
        }
    }
}

// Sort the arrays
ksort($countries);
ksort($software_keys);
?>

<div class="server-filter-container">
    <h2>Server Filter Menu</h2>
    
    <div class="filter-menu">
        <h3>Filter by Country:</h3>
        <div class="menu-items">
            <?php foreach (array_keys($countries) as $country): ?>
                <a href="#" class="filter-link" data-type="country" data-value="<?php echo htmlspecialchars($country); ?>">
                    <?php echo htmlspecialchars($country); ?>
                </a>
            <?php endforeach; ?>
        </div>
        
        <h3>Filter by Software:</h3>
        <div class="menu-items">
            <?php foreach (array_keys($software_keys) as $software): ?>
                <a href="#" class="filter-link" data-type="software" data-value="<?php echo htmlspecialchars($software); ?>">
                    <?php echo htmlspecialchars($software); ?>
                </a>
            <?php endforeach; ?>
        </div>
    </div>
    
    <div id="results" class="results-container" style="display: none;">
        <h3 id="results-title"></h3>
        <table id="results-table">
            <thead>
                <tr>
                    <th></th>
                    <th>Ctry</th>
                    <th></th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody id="results-body">
            </tbody>
        </table>
    </div>
</div>







<table>
  <caption> <h3>Div Decoration</h3> </caption>
<tr>
        <td>
<div class="box">
 <p style="padding:16px">......BOX........<br>even</p>
</div>         
<!--        </td>  
        <td>-->
<div class="box">
 <p style="padding:16px">......BOX........<br>odd </p>
</div>   
        </td>
        <td>
<div class="bsd">
 <p style="padding:16px">......BSD........<br>even</p>
</div>      
<div class="bsd">
 <p style="padding:16px">......BSD........<br>odd </p>
</div>    
      </td>
  </tr>
</table>


<table>
  <caption> <i>Plain Color/Opacity</i> </caption>
  <tr>
    <td style="background-color: var(--colo2-1);">colo2-1</td>
    <td style="background-color: var(--color-1);">color-1</td>
    <td style="background-color: var(--colo9-1);">colo9-1</td>
    <td style="background-color: var(--col10-1);">col10-1</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-2);">colo2-2</td>
    <td style="background-color: var(--color-2);">color-2</td>
    <td style="background-color: var(--colo9-2);">colo9-2</td>
    <td style="background-color: var(--col10-2);">col10-2</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-3);">colo2-3</td>
    <td style="background-color: var(--color-3);">color-3</td>
    <td style="background-color: var(--colo9-3);">colo9-3</td>
    <td style="background-color: var(--col10-3);">col10-3</td>
      </tr>
      <tr>
    <td style="background-color: var(--colo2-4);">colo2-4</td>
    <td style="background-color: var(--color-4);">color-4</td>
    <td style="background-color: var(--colo9-4);">colo9-4</td>
    <td style="background-color: var(--col10-4);">col10-4</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-5);">colo2-5</td>
    <td style="background-color: var(--color-5);">color-5</td>
    <td style="background-color: var(--colo9-5);">colo9-5</td>
    <td style="background-color: var(--col10-5);">col10-5</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-6);">colo2-6</td>
    <td style="background-color: var(--color-6);">color-6</td>
    <td style="background-color: var(--colo9-6);">colo9-6</td>
    <td style="background-color: var(--col10-6);">col10-6</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-7);">colo2-7</td>
    <td style="background-color: var(--color-7);">color-7</td>
    <td style="background-color: var(--colo9-7);">colo9-7</td>
    <td style="background-color: var(--col10-7);">col10-7</td>
      </tr>
      <tr>
    <td style="background-color: var(--colo2-8);">colo2-8</td>
    <td style="background-color: var(--color-8);">color-8</td>
    <td style="background-color: var(--colo9-8);">colo9-8</td>
    <td style="background-color: var(--col10-8);">col10-8</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-9);">colo2-9</td>
    <td style="background-color: var(--color-9);">color-9</td>
    <td style="background-color: var(--colo9-9);">colo9-9</td>
    <td style="background-color: var(--col10-9);">col10-9</td>
  </tr>
  <tr>
    <td style="background-color: var(--colo2-10);">colo2-10</td>
    <td style="background-color: var(--color-10);">color-10</td>
    <td style="background-color: var(--colo9-10);">colo9-10</td>
    <td style="background-color: var(--col10-10);">col10-10</td>
  </tr>
    </table>


<p></p>


<table>
  <caption> <i>Auto Image Pattern</b></i> </caption>
  <tr>
    <td style="background-image: var(--colo2-21);">colo2-21</td>
    <td style="background-image: var(--colo2-22);">colo2-22</td>
    <td style="background-image: var(--colo2-23);">colo2-23</td>
    <td style="background-image: var(--colo2-24);">colo2-24</td>
    <td style="background-image: var(--colo2-25);">colo2-25</td>
  </tr>
   <tr>
    <td style="background-image: var(--colo2-26);">colo2-26</td>
    <td style="background-image: var(--colo2-27);">colo2-27</td>
    <td style="background-image: var(--colo2-28);">colo2-28</td>
    <td style="background-image: var(--colo2-29);">colo2-29</td>
    <td style="background-image: var(--colo2-30);">colo2-30</td>
  </tr>   
<table>



  

<script>
// Store the JSON data in JavaScript
const serverData = <?php echo json_encode($data); ?>;

// Add click handlers to all filter links
document.querySelectorAll('.filter-link').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        
        const filterType = this.dataset.type;
        const filterValue = this.dataset.value;
        
        filterServers(filterType, filterValue);
    });
});

function filterServers(filterType, filterValue) {
    const resultsDiv = document.getElementById('results');
    const resultsTitle = document.getElementById('results-title');
    const resultsBody = document.getElementById('results-body');
    
    // Clear previous results
    resultsBody.innerHTML = '';
    
    // Filter and display results
    let rowCount = 0;
    
    if (serverData.servers) {
        for (const [serverId, serverInfo] of Object.entries(serverData.servers)) {
            // Skip if no valid data
            if (serverInfo.status !== 'success' || !serverInfo.data || !serverInfo.data.software) {
                continue;
            }
            
            if (filterType === 'country') {
                // Filter by country
                if (serverInfo.country === filterValue) {
                    // Add all software entries for this server
                    for (const [softKey, softValue] of Object.entries(serverInfo.data.software)) {
                        addResultRow(resultsBody, serverId, serverInfo.country, softKey, softValue);
                        rowCount++;
                    }
                }
            } else if (filterType === 'software') {
                // Filter by software key
                if (serverInfo.data.software[filterValue]) {
                    addResultRow(resultsBody, serverId, serverInfo.country, filterValue, serverInfo.data.software[filterValue]);
                    rowCount++;
                }
            }
        }
    }
    
    // Update title and show results
    resultsTitle.textContent = `Result: ${filterType}: ${filterValue} (${rowCount})`;
    resultsDiv.style.display = 'block';
    
    // Scroll to results
    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function addResultRow(tbody, serverId, country, softKey, softValue) {
    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${escapeHtml(serverId)}</td>
        <td>${escapeHtml(country)}</td>
        <td>${escapeHtml(softKey)}</td>
        <td>${escapeHtml(softValue)}</td>
    `;
    tbody.appendChild(row);
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}
</script>




  
<!-- ###################################This script is to process the slave json data
<script>
// Store the JSON data in JavaScript
const serverData = <?php echo json_encode($data); ?>;

// Add click handlers to all filter links
document.querySelectorAll('.filter-link').forEach(link => {
    link.addEventListener('click', function(e) {
        e.preventDefault();
        
        const filterType = this.dataset.type;
        const filterValue = this.dataset.value;
        
        filterServers(filterType, filterValue);
    });
});

function filterServers(filterType, filterValue) {
    const resultsDiv = document.getElementById('results');
    const resultsTitle = document.getElementById('results-title');
    const resultsBody = document.getElementById('results-body');
    
    // Clear previous results
    resultsBody.innerHTML = '';
    
    // Filter and display results
    let rowCount = 0;
    
    if (serverData.servers) {
        for (const [serverId, serverInfo] of Object.entries(serverData.servers)) {
            // Skip if no valid data
            if (serverInfo.status !== 'success' || !serverInfo.data || !serverInfo.data.software) {
                continue;
            }
            
            if (filterType === 'country') {
                // Filter by country
                if (serverInfo.country === filterValue) {
                    // Add all software entries for this server
                    for (const [softKey, softValue] of Object.entries(serverInfo.data.software)) {
                        addResultRow(resultsBody, serverId, serverInfo.country, softKey, softValue);
                        rowCount++;
                    }
                }
            } else if (filterType === 'software') {
                // Filter by software key
                if (serverInfo.data.software[filterValue]) {
                    addResultRow(resultsBody, serverId, serverInfo.country, filterValue, serverInfo.data.software[filterValue]);
                    rowCount++;
                }
            }
        }
    }
    
    // Update title and show results
    resultsTitle.textContent = `Result: ${filterType}: ${filterValue} (${rowCount})`;
    resultsDiv.style.display = 'block';
    
    // Scroll to results
    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function addResultRow(tbody, serverId, country, softKey, softValue) {
    const row = document.createElement('tr');
    row.innerHTML = `
        <td>${escapeHtml(serverId)}</td>
        <td>${escapeHtml(country)}</td>
        <td>${escapeHtml(softKey)}</td>
        <td>${escapeHtml(softValue)}</td>
    `;
    tbody.appendChild(row);
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}
</script>
-->


  
</body> 
</html>
